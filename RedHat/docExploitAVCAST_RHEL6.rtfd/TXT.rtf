{\rtf1\ansi\ansicpg1252\cocoartf1265\cocoasubrtf190
{\fonttbl\f0\froman\fcharset0 Times-Roman;\f1\fswiss\fcharset0 Helvetica;\f2\fmodern\fcharset0 Courier;
\f3\fmodern\fcharset0 Courier-Bold;\f4\fnil\fcharset0 LucidaGrande;\f5\fmodern\fcharset0 Courier-Oblique;
}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red109\green109\blue109;\red0\green0\blue233;
}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid202\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid203\'02\'02.;}{\levelnumbers\'01;}\fi-360\li2160\lin2160 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid4}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}}
\paperw11900\paperh16840\margl1440\margr1440\vieww17300\viewh15000\viewkind0
\deftab720
\pard\pardeftab720\sa240

\f0\fs24 \cf0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth15260\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sa240
\cf0 Cette documentation n'a pas encore \'e9t\'e9 test\'e9e "from scratch". Par cons\'e9quent, si vous identifiez des manques ou des erreurs ou que vous avez des suggestions \'e0 faire, merci de les envoyer \'e0 {\field{\*\fldinst{HYPERLINK "mailto:nicolas.truchaud@univ-lyon2.fr"}}{\fldrslt \cf4 \ul \ulc4 nicolas.truchaud@univ-lyon2.fr}}.\cell \lastrow\row
\pard\pardeftab720\sa240
\cf0 \

\f1 
\f0 \
\pard\pardeftab720\sa298

\b\fs36 \cf0 1. Installation de la distribution\
\pard\pardeftab720\sa280

\fs28 \cf0 a. Installation des packages n\'e9cessaires au fonctionnement du site :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth37160\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2\b0\fs24 \cf0 $ yum install postgresql pgadmin3 tomcat6 httpd vsftpd zip unzip mailx libpg\'adjava libcommons\'adfileupload\'adjava libcommons\'adio\'adjava libcommons\'adlang\'adjava libcommons\'adbeanutils\'adjava libcommons\'adcollections3\'adjava libcommons\'adlogging\'adjava ant subversion liblog4j1.2\'adjava openjdk\'ad6\'adjdk \cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 \
\pard\pardeftab720\sa280

\b\fs28 \cf0 b. Paquets pour l'encodage\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Les paquets n\'e9cessaires pour l'encodage sont :\
\pard\pardeftab720\sa240

\f2 \cf0 vorbis\'adtools lame ffmpeg libavcodec\'adextra\'ad53 eyeD3 ffmpeg2theora yamdi zip unzip python2.6 python\'adreportlab python\'adpsycopg2 atomicparsley
\f0 \'a0\
\'a0Un certain nombre sont inclus par d\'e9faut dans la distribution :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth7780\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ yum install vorbis\'adtools libavcodec\'adextra\'ad53 zip unzip \cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 D'autres non, il convient donc de les installer comme suit.\
\pard\pardeftab720\sa319

\b \cf0 Ajo\'fbt du RPMforge\
\pard\pardeftab720\sa240

\b0 \cf0 Documentation : {\field{\*\fldinst{HYPERLINK "http://repoforge.org/use/"}}{\fldrslt \cf4 \ul \ulc4 http://repoforge.org/use/}}\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth13260\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ rpm -Uhv http://packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm\cell \lastrow\row
\pard\pardeftab720\sa319

\f0\b \cf0 Install lame\
\pard\pardeftab720\sa240

\b0 \cf0 Documentation : {\field{\*\fldinst{HYPERLINK "http://lame.cvs.sourceforge.net/viewvc/lame/lame/USAGE"}}{\fldrslt \cf4 \ul \ulc4 http://lame.cvs.sourceforge.net/viewvc/lame/lame/USAGE}}\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth2900\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ yum install ffmpeg\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Test\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth30120\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ wget http://www.villagegeek.com/downloads/webwavs/adios.wav\
$ lame -b128 adios.wav adios.mp3\
\
LAME 3.99.5 64bits (http://lame.sf.net)\
polyphase lowpass filter disabled\
Encoding adios.wav to adios.mp3\
Encoding as 11.025 kHz single-ch MPEG-2.5 Layer III (1.4x)  64 kbps qval=3\
    Frame          |  CPU time/estim | REAL time/estim | play/CPU |    ETA \
    65/65    (100%)|    0:00/    0:00|    0:00/    0:00|   113.20x|    0:00 \
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\
   kbps       mono %     long switch short %\
   64.0      100.0        80.0  12.3   7.7\
Writing LAME Tag...done\
ReplayGain: -5.1dB\cell \lastrow\row
\pard\pardeftab720\sa319

\f0\b \cf0 Install ffmpeg\
\pard\pardeftab720\sa240

\b0 \cf0 Documentation : {\field{\*\fldinst{HYPERLINK "http://www.ffmpeg.org/ffmpeg.html"}}{\fldrslt \cf4 \ul \ulc4 http://www.ffmpeg.org/ffmpeg.html}}\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth2900\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ yum install ffmpeg\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Test\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth23340\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ wget http://mirrorblender.top-ix.org/peach/bigbuckbunny_movies/big_buck_bunny_720p_surround.avi\
$ ffmpeg -i big_buck_bunny_720p_surround.avi -acodec aac -ab 128kb -strict experimental -vcodec mpeg4 -b 1200kb -mbd 2 -cmp 2 -subcmp 2 -s 320x180 final_video.mp4\cell \lastrow\row
\pard\pardeftab720\sa319

\f0\b \cf0 Install eyeD3\
\pard\pardeftab720\sa240

\b0 \cf0 Documentation : {\field{\*\fldinst{HYPERLINK "http://eyed3.nicfit.net/#documentation-index"}}{\fldrslt \cf4 \ul \ulc4 http://eyed3.nicfit.net/#documentation-index}}\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth4760\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ yum install python-eyed3.noarch\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Test\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth24200\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 // Avant : afficher m\'e9tadonn\'e9es du fichier\
$ eyeD3 adios.mp3\
\
eyed3.plugins:WARNING: Plugin '('statistics.py', '/usr/lib/python2.6/site-packages/eyed3/plugins')' requires packages that are not installed: cannot import name Counter\
adios.mp3    [ 26.94 KB ]\
-------------------------------------------------------------------------------\
Time: 00:03    MPEG2, Layer III    [ 64 kb/s @ 11025 Hz - Mono ]\
-------------------------------------------------------------------------------\
No ID3 v1.x/v2.x tag found!\
\
// affectation de m\'e9tadonn\'e9es\
$ eyeD3 -a MonArtiste -A "MonAlbum" -t "MonMorceau" -n 4 adios.mp3\
\
// r\'e9sultat :\
eyed3.plugins:WARNING: Plugin '('statistics.py', '/usr/lib/python2.6/site-packages/eyed3/plugins')' requires packages that are not installed: cannot import name Counter\
adios.mp3    [ 28.03 KB ]\
-------------------------------------------------------------------------------\
Setting artist: MonArtiste\
Setting album: MonAlbum\
Setting title: MonMorceau\
Time: 00:03    MPEG2, Layer III    [ 64 kb/s @ 11025 Hz - Mono ]\
-------------------------------------------------------------------------------\
ID3 v2.4:\
title: MonMorceau\
artist: MonArtiste\
album: MonAlbum\
track: 4        \
Writing ID3 version v2.4\
-------------------------------------------------------------------------------\cell \lastrow\row
\pard\pardeftab720\sa319

\f0\b \cf0 Install ffmpeg2theora\
\pard\pardeftab720\sa240

\b0 \cf0 Documentation : {\field{\*\fldinst{HYPERLINK "http://v2v.cc/%7Ej/ffmpeg2theora/examples.html"}}{\fldrslt \cf4 \ul \ulc4 http://v2v.cc/~j/ffmpeg2theora/examples.html}}\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth10960\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ wget http://v2v.cc/~j/ffmpeg2theora/ffmpeg2theora-0.29.linux64.bin\
$ install -m 755 ffmpeg2theora-0.29.linux64.bin /usr/local/bin/ffmpeg2theora\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Test\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth16140\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ wget http://sourceforge.net/projects/libdv/files/examples/examples/pond.dv/download\
$ ffmpeg2theora pond.dv\
\
[dv @ 0x2d84b20] Estimating duration from bitrate, this may be inaccurate\
Input #0, dv, from 'pond.dv':\
  Duration: 00:00:30.53, start: 0.000000, bitrate: 28771 kb/s\
    Stream #0:0: Video: dvvideo, yuv411p, 720x480 [SAR 8:9 DAR 4:3], 28771 kb/s, 29.97 tbr, 29.97 tbn, 29.97 tbc\
    Stream #0:1: Audio: pcm_s16le, 44100 Hz, 2 channels, s16, 1411 kb/s\
  Pixel Aspect Ratio: 0.89/1   Frame Aspect Ratio: 1.33/1\
[swscaler @ 0x2db84a0] Warning: data is not aligned! This can lead to a speedloss\
  0:00:30.53 audio: 81kbps video: 6975kbps, time elapsed: 00:00:40             \
  0:00:30.53 audio: 81kbps video: 6975kbps, time elapsed: 00:00:40\cell \lastrow\row
\pard\pardeftab720\sa319

\f0\b \cf0 Install yamdi\
\pard\pardeftab720\sa240

\b0 \cf0 Documentation : {\field{\*\fldinst{HYPERLINK "http://yamdi.sourceforge.net/"}}{\fldrslt \cf4 \ul \ulc4 http://yamdi.sourceforge.net/}}\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth2740\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ yum install yamdi\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Test\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth12980\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ wget http://developer.longtailvideo.com/trac/export/944/trunk/html5/test/files/bunny.flv\
$ yamdi -i bunny.flv -o bunny_with_metadata.flv - "John Doe\cell \lastrow\row
\pard\pardeftab720\sa319

\f0\b \cf0 Install 
\f3 gcc-c++
\f0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth3040\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2\b0 \cf0 $ yum install gcc-c++\cell \lastrow\row
\pard\pardeftab720\sa319

\f0\b \cf0 Install atomicparsley\
\pard\pardeftab720\sa240

\b0 \cf0 Documentation : {\field{\*\fldinst{HYPERLINK "http://atomicparsley.sourceforge.net/"}}{\fldrslt \cf4 \ul \ulc4 http://atomicparsley.sourceforge.net/}} & {\field{\*\fldinst{HYPERLINK "https://bitbucket.org/wez/atomicparsley"}}{\fldrslt \cf4 \ul \ulc4 https://bitbucket.org/wez/atomicparsley}}\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth9660\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ wget https://bitbucket.org/wez/atomicparsley/get/9183fff907bf.zip\
$ unzip 9183fff907bf.zip\
$ cd wez-atomicparsley-9183fff907bf/\
$ sudo yum install automake\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Test\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth440\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 ???\cell \lastrow\row
\pard\pardeftab720\sa280

\f0\b\fs28 \cf0 c. Modification des presets ipod\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth10660\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2\b0\fs24 \cf0 $ sed -i 's/^profile/vprofile/' /usr/share/ffmpeg/libx264-ipod320.ffpreset\
$ sed -i 's/^profile/vprofile/' /usr/share/ffmpeg/libx264-ipod640.ffpreset\cell \lastrow\row
\pard\pardeftab720\sa298

\f0\b\fs36 \cf0 2. Param\'e9trage du ftp\
\pard\pardeftab720\sa280

\fs28 \cf0 Cr\'e9er un r\'e9pertoire \'e0 la racine du serveur :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth3460\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2\b0\fs24 \cf0 $ mkdir /audiovideocours\cell \lastrow\row
\pard\pardeftab720\sa280

\f0\b\fs28 \cf0 Ajouter un nouvel utilisateur du syst\'e8me \'ab ftpuser \'bb:\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth6340\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2\b0\fs24 \cf0 $ useradd -m -d /audiovideocours/ftp ftpuser\
$ passwd ftpuser\cell \lastrow\row
\pard\pardeftab720\sa280

\f0\b\fs28 \cf0 Des sous-r\'e9pertoires doivent \'e9galement \'eatre pr\'e9sents dans le r\'e9pertoire FTP:\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth18880\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2\b0\fs24 \cf0 $ mkdir -p /audiovideocours/ftp/canceled /audiovideocours/ftp/client_update /audiovideocours/ftp/live /audiovideocours/ftp/releases\cell \lastrow\row
\pard\tx220\tx720\pardeftab720\li720\fi-720
\ls1\ilvl0
\f0 \cf0 {\listtext	\'95	}canceled : sert \'e0 stocker les cours enregistr\'e9s par le client mais annul\'e9s avant la publication.\
{\listtext	\'95	}client_update : permet de stocker la derni\'e8re version du client d'enregistrement des cours, afin qu'il se mette \'e0 jour automatiquement dans les amphis.\
{\listtext	\'95	}live : est le r\'e9pertoire de stockage des diapositives d'un cours en direct envoy\'e9es par FTP.\
{\listtext	\'95	}releases : stocke les programmes d'installation du client AudioVideoCast.\
\pard\pardeftab720\sa280

\b\fs28 \cf0 Modifier les lignes de\'a0/etc/vsftpd/vsftpd.conf :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth4480\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2\b0\fs24 \cf0 anonymous_enable=NO\
local_enable=YES\
write_enable=YES\
local_umask=022\
chroot_local_user=YES\
local_root=/audiovideocours/ftp\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Red\'e9marrez le serveur FTP :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth3460\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ service vsftpd restart\cell \lastrow\row
\pard\pardeftab720\sa298

\f0\b\fs36 \cf0 3. R\'e9cup\'e9ration des sources\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Vous aurez besoin d'utiliser git pour r\'e9cup\'e9rer les derni\'e8res sources stables du projet via la commande :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth16860\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ git clone https://github.com/unistra/avc-server.git univ-r_av && cd univ-r_av && git checkout release-2.54 && cd ..\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 L'utilisation de Git ayant \'e9chou\'e9e (erreur type\'a0 "{\field{\*\fldinst{HYPERLINK "http://stackoverflow.com/questions/8329485/git-clone-fatal-unable-to-find-remote-helper-for-https"}}{\fldrslt \cf4 \ul \ulc4 Unable to find remote helper for 'https'}}"), nous avons r\'e9cup\'e9r\'e9 l'archive zip sur GitHub \'e0 l'adresse {\field{\*\fldinst{HYPERLINK "https://github.com/unistra/avc-server/archive/master.zip"}}{\fldrslt \cf4 \ul \ulc4 https://github.com/unistra/avc-server/archive/master.zip}} :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth9080\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ wget https://github.com/unistra/avc-server/archive/master.zip\
$ unzip master.zip\
$ mv master avc-server-master\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Il vous faut \'e9galement r\'e9cup\'e9rer le player flash JW player, en acceptant la licence \'ab Creative Commons : Attribution-Noncommercial-Share Alike 3.0 Unported \'bb (voir {\field{\*\fldinst{HYPERLINK "http://creativecommons.org/licenses/by-nc-sa/3.0/"}}{\fldrslt \cf4 \ul \ulc4 http://creativecommons.org/licenses/by-nc-sa/3.0/}}) :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth13400\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ wget http://audiovideocast.unistra.fr/releases/player.swf\
$ mv player.swf /usr/local/share/applications/avc-server-master/WebContent/files/jwflvplayer/\cell \lastrow\row
\pard\pardeftab720\sa298

\f0\b\fs36 \cf0 4. Cr\'e9ation de la base de donn\'e9es\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth6140\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sa240

\b0\fs24 \cf0 Pour d\'e9terminer si votre CentOS est en 32-bit ou 64-bit : tappez\

\itap2\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth1460\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap2\pardeftab720

\f2 \cf0 $ uname -a\nestcell \lastrow\nestrow
\pard\intbl\itap1\pardeftab720\sa240

\f0 \cf0 Si le r\'e9sultat contient i686 ou i386, votre CentOS est en 32-bit.\
Si le r\'e9sultat contient x86_64, votre CentOS est en 64-bit.\
\pard\intbl\itap1\pardeftab720
\cf0 \'a0\cell \lastrow\row
\pard\pardeftab720\sa240
\cf0 Installation de PostGreSQL :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth5480\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ yum install postgresql-server.x86_64\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Initialisation de la base de donn\'e9es :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth9660\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ /etc/init.d/postgresql initdb\
Initialisation de la base de donn\'e9es : \
                                                           [  OK  ]\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 D\'e9marrage de la base de donn\'e9es :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth9660\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ service postgresql start\
Starting postgresql service:                               [  OK  ]\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Mise en place de l'autostart en cas de reboot :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth3620\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ chkconfig postgresql on\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Rappel des commandes de base pour postgresql :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth9940\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ postgres=# help\
Vous utilisez psql, l'interface en ligne de commande de PostgreSQL.\
Saisissez:\
    \\copyright pour les termes de distribution\
    \\h pour l'aide-m\'e9moire des commandes SQL\
    \\? pour l'aide-m\'e9moire des commandes psql\
    \\g ou point-virgule en fin d'instruction pour ex\'e9cuter la requ\'eate\
    \\q pour quitter\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Cr\'e9ation d'un utilisateur "sqluser"\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth9080\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ su - postgres --command="createuser -P sqluser"\
Enter password for new role: \
Enter it again: \
Shall the new role be a superuser? (y/n) n\
Shall the new role be allowed to create databases? (y/n) n\
Shall the new role be allowed to create more new roles? (y/n) n\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Cr\'e9ation d'une base de donn\'e9es "univrav" en utf-8 pour cet utilisateur :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth9080\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ su - postgres --command="createdb -O sqluser -E UTF8 univrav"\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Lancer le script de cr\'e9ation de la base se trouvant dans le r\'e9pertoire des sources :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth16860\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ psql -h localhost -U sqluser -W -d univrav < /tmp/avc-server-master/WebContent/scripts/script_creation_database.sql\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth15260\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sa240
\cf0 Si une erreur "psql: FATAL:\'a0 Ident authentication failed for user ..." est retourn\'e9e, \'e9ditez le fichier "pg_hba.conf" comme suit en gardant une copie de sauvegarde :\

\itap2\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth10520\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap2\pardeftab720

\f2 \cf0 $ cp /var/lib/pgsql/data/pg_hba.conf /var/lib/pgsql/data/pg_hba.conf.back\
$ vi /var/lib/pgsql/data/pg_hba.conf\nestcell \lastrow\nestrow
\pard\intbl\itap1\pardeftab720\sa240

\f0 \cf0 Avant :\

\itap2\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth8660\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap2\pardeftab720

\f2 \cf0 # TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD\
# "local" is for Unix domain socket connections only\
local   all         all                               ident\
# IPv4 local connections:\
host    all         all         127.0.0.1/32          ident\
# IPv6 local connections:\
host    all         all         ::1/128               ident\nestcell \lastrow\nestrow
\pard\intbl\itap1\pardeftab720\sa240

\f0 \cf0 Apr\'e8s :\

\itap2\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth8940\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap2\pardeftab720

\f2 \cf0 # TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD\
# "local" is for Unix domain socket connections only\
local   all         all                               password\
# IPv4 local connections:\
host    all         all         127.0.0.1/32          password\
# IPv6 local connections:\
host    all         all         ::1/128               password\nestcell \lastrow\nestrow
\pard\intbl\itap1\pardeftab720\sa240

\f0 \cf0 Pour prendre en compte les changements, red\'e9marrez le service :\

\itap2\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth4760\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap2\pardeftab720

\f2 \cf0 $ sudo service postgresql restart\nestcell \lastrow\nestrow
\pard\intbl\itap1\pardeftab720\sa240

\f0 \cf0 pour plus d'infos : {\field{\*\fldinst{HYPERLINK "http://www.postgresql.org/docs/8.2/static/auth-pg-hba-conf.html"}}{\fldrslt \cf4 \ul \ulc4 http://www.postgresql.org/docs/8.2/static/auth-pg-hba-conf.html}}\cell \lastrow\row
\pard\pardeftab720\sa240
\cf0 V\'e9rifier que les tables ont bien \'e9t\'e9 cr\'e9\'e9es :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth7060\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 // connexion \'e0 la base\
$ psql -h localhost -d univrav -U sqluser -W\
// lister les tables\
univrav=> \\dt\
               Liste des relations\
 Sch\'e9ma |       Nom       | Type  | Propri\'e9taire \
--------+-----------------+-------+--------------\
 public | amphi           | table | sqluser\
 public | building        | table | sqluser\
 public | course          | table | sqluser\
 public | discipline      | table | sqluser\
 public | job             | table | sqluser\
 public | level           | table | sqluser\
 public | log_user_action | table | sqluser\
 public | selection       | table | sqluser\
 public | slide           | table | sqluser\
 public | tag             | table | sqluser\
 public | user            | table | sqluser\
(11 lignes)\cell \lastrow\row
\pard\pardeftab720\sa298

\f0\b\fs36 \cf0 5. Configuration de tomcat\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Ajouter les librairies suivantes dans le r\'e9pertoire 
\f2 /usr/share/tomcat6/lib
\f0  :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth14560\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ ln -s /usr/share/java/commons-beanutils-1.9.1.jar /usr/share/tomcat6/lib/commons-beanutils.jar\
$ ln -s /usr/share/java/commons-collections-3.2.1.jar /usr/share/tomcat6/lib/commons-collections3.jar\
$ ln -s /usr/share/java/commons-collections.jar /usr/share/tomcat6/lib/commons-collections.jar\
$ ln -s /usr/share/java/commons-dbcp.jar /usr/share/tomcat6/lib/commons-dbcp.jar\
$ ln -s /usr/share/java/commons-fileupload-1.3.1.jar /usr/share/tomcat6/lib/commons-fileupload.jar\
$ ln -s /usr/share/java/commons-io-2.4.jar /usr/share/tomcat6/lib/commons-io.jar\
$ ln -s /usr/share/java/commons-lang-2.6.jar /usr/share/tomcat6/lib/commons-lang.jar\
$ ln -s /usr/share/java/commons-logging.jar /usr/share/tomcat6/lib/commons-logging.jar\
$ ln -s /usr/share/java/commons-pool.jar /usr/share/tomcat6/lib/commons-pool.jar\
$ ln -s /usr/share/java/postgresql-jdbc3.jar /usr/share/tomcat6/lib/postgresql-jdbc3.jar\
$ ln -s /usr/share/java/log4j-1.2.14.jar /usr/share/tomcat6/lib/log4j1.2.jar\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth15100\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sa240
\cf0 Il peut \'eatre n\'e9cessaire d'installer les librairies Apache Commons \'e0 la main au pr\'e9alable :\

\itap2\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth14980\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap2\pardeftab720

\f2 \cf0 yum install tomcat6-admin-webapps.noarch\
yum install tomcat6-webapps.noarch\
\
wget http://apache.crihan.fr/dist//commons/fileupload/binaries/commons-fileupload-1.3.1-bin.tar.gz\
wget http://mirrors.ircam.fr/pub/apache//commons/lang/binaries/commons-lang3-3.3.2-bin.tar.gz\
wget http://mirrors.ircam.fr/pub/apache//commons/io/binaries/commons-io-2.4-bin.tar.gz\
wget http://apache.websitebeheerjd.nl//commons/collections/binaries/commons-collections-3.2.1-bin.tar.gz\
wget http://apache.lehtivihrea.org//commons/beanutils/binaries/commons-beanutils-1.9.1-bin.tar.gz\
for fichier in $(ls commons*gz); do tar -xzvf $fichier; done\
mv commons-*/\{lib/,\}*jar /usr/share/java/\
\
# v\'e9rif : \
\
find / -name "commons-*"\
\
yum install postgresql-jdbc.noarch\
\
# v\'e9rif : \
\
find / -name "postgresql-jdbc*"\nestcell \lastrow\nestrow
\pard\intbl\itap1\pardeftab720\sa240

\f0 \cf0 \cell \lastrow\row
\pard\pardeftab720\sa280

\b\fs28 \cf0 Configuration du tomcat-users.xml\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Cr\'e9ation d'un utilisateur tomcat 
\f2 ulpmm
\f0  de la mani\'e8re suivante :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth6920\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ cd /usr/share/tomcat6/conf/\
$ sudo cp tomcat-users.xml tomcat-users.xml.back\
$ sudo vi tomcat-users.xml\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Contenu :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth10520\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 <tomcat-users>\
  <role rolename="tomcat"/>\
  <role rolename="manager"/>\
  <role rolename="ulpmm"/>\
  <user username="ulpmm" password="s3cret" roles="tomcat,manager,ulpmm"/>\
</tomcat-users>\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Note: le r\'f4le 
\f2 ulpmm
\f0  est n\'e9cessaire pour acc\'e9der aux pages d\'92administration d'AudioVideoCast.\
\pard\pardeftab720\sa280

\b\fs28 \cf0 Configuration du server.xml :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth4480\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2\b0\fs24 \cf0 $ cd /usr/share/tomcat6/conf/\
// copie de sauvegarde\
$ cp server.xml server.xml.back\
\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Parties du fichier \'e0 modifier :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth6060\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 // configuration du fichier server.xml\
<Connector port="8080" protocol="HTTP/1.1"\
	connectionTimeout="20000"\
	redirectPort="443" />\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Mise en place du certificat pour Tomcat\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth10520\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"\
maxThreads="150" scheme="https" secure="true"\
clientAuth="false" sslProtocol="TLS"\
keystoreFile="/etc/tomcat6/tomcatkeystore.jks" keystorePass="********" />\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth10240\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 <!Define an AJP 1.3 Connector on port 8009 >\
	<Connector port="8009" protocol="AJP/1.3" redirectPort="443" />\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth22180\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 <Host name="localhost" appBase="webapps" unpackWARs="true" autoDeploy="true"\
	xmlValidation="false" xmlNamespaceAware="false">\
	<Context path="" docBase="univr_av"> <!-- laisser vide le contexte path pour acc\'e9der au portail avec une adresse du type http://mon-domaine.fr -->\
		<Environment name="volume" value="1" type="java.lang.Short" override="false"/>\
			<Resource\
				name="jdbc/postgres"\
				auth="Container"\
				type="javax.sql.DataSource"\
				driverClassName="org.postgresql.Driver"\
				url="jdbc:postgresql://127.0.0.1:5432/univrav"\
				username="sqluser"\
				password="*******"\
				maxActive="20"\
				maxIdle="10"\
				maxWait="1"\
			/>\
			<Resource name="ldap/ox" auth="Container"\
				type="com.sun.jndi.ldap.LdapCtx"\
				factory="org.ulpmm.univrav.dao.LdapFactory"\
				java.naming.factory.initial="com.sun.jndi.ldap.LdapCtxFactory"\
				java.naming.provider.url="your_ldap_url"\
				java.naming.security.authentication="simple"\
				java.naming.security.principal="ldap_user"\
				java.naming.security.credentials="ldap_password"\
				com.sun.jndi.ldap.connect.pool="true"\
				java.naming.security.protocol="ssl"\
				com.sun.jndi.ldap.connect.timeout="5000"\
				com.sun.jndi.ldap.read.timeout="5000"/>\
	</Context>\
</Host>\cell \lastrow\row
\pard\pardeftab720\sa280

\f0\b\fs28 \cf0 Configuration des policies :\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Attention : certaines versions de tomcat sont plus stricte que d'autres d'un point devu s\'e9curit\'e9 au niveau des policies.\
En cas d'erreur provenant de \'ab java.security \'bb, il faut :\
\pard\tx220\tx720\pardeftab720\li720\fi-720
\ls2\ilvl0\cf0 {\listtext	\'95	}Soit d\'e9sactiver le \'ab security manager \'bb dans
\f2  /etc/init.d/tomcat6: TOMCAT6_SECURITY=no
\f0 \
{\listtext	\'95	}Soit configurer les policies du r\'e9pertoire 
\f2 /etc/tomcat6/policy.d/
\f0 \
\pard\pardeftab720\sa240
\cf0 Apr\'e8s avoir effectu\'e9es toutes les modifications ci-dessus, red\'e9marrer tomcat via :\
\pard\pardeftab720\sa240

\f2 \cf0 /etc/init.d/tomcat6 restart
\f0 \
\pard\pardeftab720\sa298

\b\fs36 \cf0 6. Stockage des r\'e9pertoires de cours\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Cr\'e9er un r\'e9pertoire 
\f2 /audiovideocours/cours
\f0  :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth4040\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 mkdir /audiovideocours/cours\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Ce r\'e9pertoire permet de stocker les cours.\
Il contient un r\'e9pertoire (par d\'e9faut 1) appel\'e9 \'ab volume de stockage \'bb. Il est possible de modifier la valeur du volume dans le contexte de tomcat, si l'on veut monter un nouveau filesystem (pour raison de place par exemple).\
Chaque cours se trouve dans une arborescence de sous-r\'e9pertoires bas\'e9e sur l'id du cours (format\'e9 sur 8 chiffres).\
Par exemple, pour le cours n\'b04209,l'arborescence sera :\
\pard\pardeftab720\sa240

\f2 \cf0 /audiovideocours/cours/1/00/00/42/09
\f0 \
On donne les droits d'\'e9criture \'e0 l'ensemble du r\'e9pertoire 
\f2 /audiovideocours
\f0  :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth4180\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 chmod -R 777 /audiovideocours\cell \lastrow\row
\pard\pardeftab720\sa298

\f0\b\fs36 \cf0 7. D\'e9ploiement de l'application AudioVideoCast :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth4560\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sa240

\b0\fs24 \cf0 V\'e9rifiez que Ant soit install\'e9 sur votre serveur :\

\itap2\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth2460\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap2\pardeftab720

\f2 \cf0 $ yum install ant\nestcell \lastrow\nestrow
\pard\intbl\itap1\pardeftab720\sa240

\f0 \cf0 \cell \lastrow\row
\pard\pardeftab720\sa240
\cf0 Pour cr\'e9er un fichier .war de l\'92application, il suffit d'utiliser le fichier 
\f2 build.xml
\f0 , qui est \'e0 la racine du projet, avec ANT :\
\pard\tx220\tx720\pardeftab720\li720\fi-720
\ls3\ilvl0\cf0 {\listtext	\'95	}Configurer l'application par le fichier 
\f2 univrav.properties
\f0  dans le r\'e9pertoire 
\f2 WebContent/conf
\f0  des sources \uc0\u8232 et par le fichier 
\f2 WebContent/WEBINF/web.xml
\f0  (voir Annexe).\
{\listtext	\'95	}G\'e9n\'e9ration du .war de l'application via les sources r\'e9cup\'e9r\'e9es du SVN, en \'e9xecutant la commande suivante \'e0 la racine du projet : 
\f2 ant
\f0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240
\ls3\ilvl1\cf0 {\listtext	
\f4 \uc0\u9702 
\f0 	}En cas de probl\'e8me dans Application.java > erreur : "package org.apache.commons.lang does not exist "\
\pard\tx1660\tx2160\pardeftab720\li2160\fi-2160\sa240
\ls3\ilvl2\cf0 {\listtext	1.	}\'e9diter fichier Application : 
\f2 vi /usr/local/share/applications/avc-server-master/src/org/ulpmm/univrav/web/Application.java
\f0 \
{\listtext	2.	}changer classe commons-lang charg\'e9e : 
\f2 import org.apache.commons.lang3.text.WordUtils
\f0 ;\
{\listtext	3.	}mettre en commentaire ligne 47 : 
\f2 import org.apache.commons.lang.WordUtils;
\f0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440
\ls3\ilvl1\cf0 {\listtext	
\f4 \uc0\u9702 
\f0 	}En cas d'erreur : "the class org.apache.tools.ant.taskdefs.optional.junit.JUnitTask was not found"\
\pard\tx1660\tx2160\pardeftab720\li2160\fi-2160\sa240
\ls3\ilvl2\cf0 {\listtext	1.	}installer junit : 
\f2 sudo yum install ant-junit.x86_64
\f0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240
\ls3\ilvl1\cf0 {\listtext	
\f4 \uc0\u9702 
\f0 	}G\'e9n\'e9ration du war :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth9520\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\tx940\tx1440\pardeftab720\li1440\fi-1440
\ls3\ilvl1
\f2 \cf0 {\listtext	
\f4 \uc0\u9702 
\f2 	}$ ant\
{\listtext	
\f4 \uc0\u9702 
\f2 	}Buildfile: build.xml\
{\listtext	
\f4 \uc0\u9702 
\f2 	}prep:\
{\listtext	
\f4 \uc0\u9702 
\f2 	}init:\
{\listtext	
\f4 \uc0\u9702 
\f2 	}compile:\
{\listtext	
\f4 \uc0\u9702 
\f2 	}     [echo] Compilation des sources\
{\listtext	
\f4 \uc0\u9702 
\f2 	}test:\
{\listtext	
\f4 \uc0\u9702 
\f2 	}makeWar:\
{\listtext	
\f4 \uc0\u9702 
\f2 	}     [echo] Cr\'e9ation de l'archive univ-r_av.war dans /root/dev/war\
{\listtext	
\f4 \uc0\u9702 
\f2 	}      [war] Building war: /root/dev/war/univ-r_av.war\
{\listtext	
\f4 \uc0\u9702 
\f2 	}BUILD SUCCESSFUL\
{\listtext	
\f4 \uc0\u9702 
\f2 	}Total time: 1 second
\f0 \cell \lastrow\row
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240
\ls3\ilvl1\cf0 {\listtext	
\f4 \uc0\u9702 
\f0 	}\uc0\u8232 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240
\ls3\ilvl0\cf0 {\listtext	\'95	}D\'e9ploiement du .war sur Tomcat (url : {\field{\*\fldinst{HYPERLINK "http://localhost:8180/manager/html"}}{\fldrslt \cf4 \ul \ulc4 http://localhost:8180/manager/html}})\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth10520\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\tx220\tx720\pardeftab720\li720\fi-720
\ls3\ilvl0
\f2 \cf0 {\listtext	\'95	}$ cp /root/dev/war/univ-r_av.war /usr/share/tomcat6/webapps/univ-r_av.war\
{\listtext	\'95	}$ service tomcat6 restart
\f0 \cell \lastrow\row
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240
\ls3\ilvl0\cf0 {\listtext	\'95	}\uc0\u8232 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth15260\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sa240
\cf0 Attention : il est pr\'e9f\'e9rable de supprimer le cache de Tomcat lors de son red\'e9marrage car il peut y avoir des probl\'e8mes de rafra\'eechissement de pages lorsqu'une nouvelle version est mise en place.\cell \lastrow\row
\pard\pardeftab720\sa240
\cf0 Acc\'e9der \'e0 l'application via {\field{\*\fldinst{HYPERLINK "http://localhost/univ-r_av"}}{\fldrslt \cf4 \ul \ulc4 http://localhost/univ-r_av}} ou via l'url apache que vous avez configur\'e9e : {\field{\*\fldinst{HYPERLINK "http://avcast-test.univ-lyon2.fr:8080/univ-r_av/"}}{\fldrslt \cf4 \ul \ulc4 http://avcast-test.univ-lyon2.fr:8080/univ-r_av/}}\'a0\
\pard\pardeftab720\sa298

\b\fs36 \cf0 8. Configuration APACHE\
\pard\pardeftab720\sa280

\fs28 \cf0 a. Installation des modules\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Les modules qui doivent \'eatre install\'e9s sont :
\f2  proxy proxy_ajp proxy_balancer proxy_http rewrite ssl
\f0 \
La plupart sont install\'e9s par d\'e9faut sur RHEL6. Le seul manquant est le module SSL.\
Pour le v\'e9rifier :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth12820\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ grep -E 'rewrite|proxy|ssl' /etc/httpd/conf\{.d,\}/*.conf | grep LoadModule\
/etc/httpd/conf/httpd.conf:LoadModule rewrite_module modules/mod_rewrite.so\
/etc/httpd/conf/httpd.conf:LoadModule proxy_module modules/mod_proxy.so\
/etc/httpd/conf/httpd.conf:LoadModule proxy_balancer_module modules/mod_proxy_balancer.so\
/etc/httpd/conf/httpd.conf:LoadModule proxy_ftp_module modules/mod_proxy_ftp.so\
/etc/httpd/conf/httpd.conf:LoadModule proxy_http_module modules/mod_proxy_http.so\
/etc/httpd/conf/httpd.conf:LoadModule proxy_ajp_module modules/mod_proxy_ajp.so\
/etc/httpd/conf/httpd.conf:LoadModule proxy_connect_module modules/mod_proxy_connect.so\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Le seul module manquant est mod_ssl.\
Pour l'installer :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth4040\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ yum install mod_ssl.x86_64\cell \lastrow\row
\pard\pardeftab720\sa280

\f0\b\fs28 \cf0 b. Configuration d'apache\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Il faut cr\'e9er un fichier 
\f2 monsite.conf
\f0  dans le r\'e9pertoire
\f2  /etc/httpd/conf.d/
\f0  qui doit contenir les h\'f4tes virtuels pour le site web (un sur le port 80 et un sur le port SSL 443).\
Il faut alors monter le dossier racine afin d'avoir acc\'e8s \'e0 l'arborescence du site, le dossier 
\f2 /audiovideocours/cours/
\f0  pour pouvoir acc\'e9der aux cours depuis l'ext\'e9rieur, les dossiers 
\f2 /audiovideocours/ftp/live/
\f0  et 
\f2 /audiovideocours/ftp/releases
\f0  mettant \'e0 disposition des fichiers via FTP.\
Pour SSL, il faut cr\'e9er un certificat et l'activer depuis l'h\'f4te virtuel 443. Puis, depuis l'h\'f4te virtuel 80, on redirige les URLs que l'on d\'e9sire s\'e9curiser vers le port 443, via le mode rewrite.\
// cr\'e9ation des fichiers mon-site.conf et mon-site.include\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth3900\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ cd /etc/httpd/conf.d/\
$ touch avcast-test.conf\
$ touch avcast-test.include\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 // Fichier mon-site.conf\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth17440\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 <VirtualHost *:80>\
        ServerName mon-site\
        ServerAlias mon-site-alias\
        RewriteEngine On\
        RewriteCond %\{HTTPS\} off\
        RewriteRule ^(.*)/avc/myspace(.*)$ https://%\{HTTP_HOST\}%\{REQUEST_URI\} [R=301,L]\
		#RewriteRule ^(.*)/avc/myspace(.*)$ https://avcast-test.univ-lyon2.fr/avc/myspace_home [R=301,L]\
        RewriteRule ^(.*)/admin(.*)$ https://%\{HTTP_HOST\}%\{REQUEST_URI\} [R=301,L]\
        RewriteRule ^(.*)/avc/admin(.*)$ https://%\{HTTP_HOST\}%\{REQUEST_URI\} [R=301,L]\
        RewriteRule ^(.*)/avc/publication(.*)$ https://%\{HTTP_HOST\}%\{REQUEST_URI\}[R=301,L]\
        RewriteRule ^(.*)/avc/authentification(.*)$ https://%\{HTTP_HOST\}%\{REQUEST_URI\} [R=301,L]\
		#RewriteRule ^(.*)/avc/authentification(.*)$ https://avcast-test.univ-lyon2.fr/avc/myspace_home [R=301,L]\
        Include /etc/httpd/conf.d/mon-site.include\
</VirtualHost>\
\
<VirtualHost *:443>\
		ServerName mon-site\
		ServerAlias mon-site\
		SSLEngine On\
		SSLCipherSuite (ici les algorithmes de chiffrement g\'e9n\'e9r\'e9s)\
		SSLCertificateFile /etc/pki/tls/certs/mon-site.crt\
		SSLCertificateKeyFile /etc/pki/tls/private/mon-site.key\
		SSLCertificateChainFile /etc/pki/tls/certs/mon-site.crt\
		Include /etc/httpd/conf.d/mon-site.include\
		RewriteEngine On\
		RewriteCond %\{HTTPS\} on\
		RewriteRule ^(.*)/avc/courseaccess(.*)$ http://%\{HTTP_HOST\}%\{REQUEST_URI\} [R=301,L]\
		RewriteRule ^(.*)/avc/liveaccess(.*)$ http://%\{HTTP_HOST\}%\{REQUEST_URI\} [R=301,L]\
</VirtualHost>\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 // Fichier mon-site.conf\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth11380\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 ServerAdmin webmaster@localhost\
\
DocumentRoot /var/lib/tomcat6/webapps/univ-r_av\
Options -Indexes\
\
<Proxy *>\
 Allow from all\
</Proxy>\
\
<Proxy balancer://tomcat/univ-r_av>\
     BalancerMember ajp://127.0.0.1:8009 route=localhost connectiontimeout=1000\
</Proxy>\
\
ProxyPass /coursv2 !\
Alias /coursv2 "/audiovideocours/cours/"\
\
ProxyPass /live !\
Alias /live "/audiovideocours/ftp/live/"\
\
ProxyPass /releases !\
Alias /releases "/audiovideocours/ftp/releases/"\
\
ProxyPass /balancer-manager !\
<Location /balancer-manager>\
     SetHandler balancer-manager\
     Order Deny,Allow\
     Deny from all\
     Allow from 127.0.0.1\
</Location>\
\
ProxyPass / balancer://tomcat/ stickysession=JSESSIONID|jsessionid\
ProxyPassReverse / balancer://tomcat/ stickysession=JSESSIONID|jsessionid\
\
ErrorLog /var/log/httpd/error-univ-rav.log\
LogLevel warn\
CustomLog /var/log/httpd/access-univ-rav.log combined\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Il faut, apr\'e8s tout changement au niveau de l'un de ces fichiers, red\'e9marrer Apache :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth3320\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 $ service httpd restart\cell \lastrow\row
\pard\pardeftab720\sa280

\f0\b\fs28 \cf0 c. Connexion avec un sous-r\'e9pertoire : http://avcast-test.univ-lyon2.fr/
\f3 univ-r_av
\f0 /\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Modification du fichier 
\f2 /usr/share/tomcat6/conf/server.xml
\f0  pour faire pointer la racine non plus sur le serveur Tomcat mais sur un sous-r\'e9pertoire :\
\pard\pardeftab720\sa240

\f2 \cf0 <Context path="univ-r_av" docBase="univ-r_av">
\f0  puis restart Tomcat\
Le site est donc accessible \'e0 l'adresse : 
\f2 http://avcast-test.univ-lyon2.fr/univ-r_av/
\f0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth9740\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sa240
\cf0 Il convient de v\'e9rifier toutes les URLs d'acc\'e8s, notamment dans le fichier 
\f2 univrav.properties
\f0 .\cell \lastrow\row
\pard\pardeftab720\sa298

\b\fs36 \cf0 9. Activation du streaming\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth1280\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\b0\fs24 \cf0 Partie \'e0 venir\cell \lastrow\row
\pard\pardeftab720\sa298

\b\fs36 \cf0 10. S\'e9parer l'encodage des m\'e9dias\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth1280\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\b0\fs24 \cf0 Partie \'e0 venir\cell \lastrow\row
\pard\pardeftab720\sa298

\b\fs36 \cf0 11. Suppression des tests\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth1280\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\b0\fs24 \cf0 Partie \'e0 venir\cell \lastrow\row
\pard\pardeftab720\sa298

\b\fs36 \cf0 12. Configuration du live\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth1280\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\b0\fs24 \cf0 Partie \'e0 venir\cell \lastrow\row
\pard\pardeftab720\sa298

\b\fs36 \cf0 13. Page d'administration\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 La page d'administration permet de g\'e9rer diff\'e9rents \'e9l\'e9ments du site : 
\f2 http://mon-site/admin
\f0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720
\ls4\ilvl0\cf0 {\listtext	1.	}Gestion des cours (\'e9diter, supprimer)\
{\listtext	2.	}Gestion des cours Univ-r (\'e9diter, supprimer)\
{\listtext	3.	}Gestion des b\'e2timents et des salles (ajouter, \'e9diter, supprimer)\
{\listtext	4.	}Gestion des utilisateurs (ajouter, \'e9diter, supprimer)\
{\listtext	5.	}Statistiques sur les auteurs\
{\listtext	6.	}Statistiques g\'e9n\'e9rales (taille du disque, commande findTracks et findStats, version des clients)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240
\ls4\ilvl0
\i \cf0 {\listtext	7.	}Page d\'e9di\'e9 aux tests (code d'acc\'e8s sp\'e9cifiques modifiables dans le fichier \'ab 
\f5 univrav.properties
\f0  \'bb via \'ab 
\f5 testKeyWord
\f0  \'bb) : 
\f5 http://mon-site/tests
\f0\i0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth7180\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\tx220\tx720\pardeftab720\li720\fi-720\sa240
\ls4\ilvl0\cf0 {\listtext	8.	}Cette partie l\'e0 ne fonctionne pas dans la configuration d\'e9ploy\'e9e chez nous.\cell \lastrow\row
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240
\ls4\ilvl0\cf0 {\listtext	9.	}\uc0\u8232 \
{\listtext	10.	}Gestion des s\'e9lections et des collections de cours\
\pard\tx220\tx720\pardeftab720\li720\fi-720
\ls4\ilvl0\cf0 {\listtext	11.	}Test des versions des clients des amphith\'e9\'e2tres\
\pard\pardeftab720\sa240
\cf0 NB: Pour les statistiques, il y a la possibilit\'e9 d'utiliser google analytics (voir fichier \'ab
\f2  WEB-INF/views/include/google_analytics.jsp
\f0  \'bb pour y coller votre script ga)\
\pard\pardeftab720\sa298

\b\fs36 \cf0 14. Annexes\
\pard\pardeftab720\sa280

\fs28 \cf0 a. Personnalisation de l'interface\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Fichier master : 
\f2 /usr/local/share/applications/avc-server-master/WebContent/WEB-INF/views/include/footer.jsp
\f0 \
Ligne 14 modifi\'e9e :\

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth49980\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0       <a href="mailto:nicolas.truchaud@univ-lyon2.fr"><fmt:message key="Assistance"/></a> - <a href="mailto:nicolas.truchaud@univ-lyon2.fr.fr"><fmt:message key="Contact"/></a> - <a href="<c:out value="$\{thick_legal\}" />" title="<fmt:message key="Informations l&eacute;gales"/>" class="thickbox"><fmt:message key="Informations l&eacute;gales"/></a>\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 Emplacement final : 
\f2 /usr/share/tomcat6/webapps/univ-r_av/WEB-INF/views/include/
\f0 \
\pard\pardeftab720\sa280

\b\fs28 \cf0 b. D\'e9tail du fichier "univrav.properties"\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Chemin d'acc\'e8s au fichier :\'a0
\f2 /usr/share/tomcat6/webapps/univ-r_av/conf/univrav.properties
\f0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth52860\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0 # The Url of the server\
serverUrl = http://localhost/univ-r_av\
## Il s'agit de l'url du serveur. Elle doit \'eatre chang\'e9e.\
\
# The Url to access to the course on internet Prod : http://[HOSTNAME].u-strasbg.fr/\
coursesUrl = http://avcast-test.univ-lyon2.fr/coursv2/\
# Il s'agit de l'url permettant d'acc\'e9der aux enregistrements. Elle doit \'eatre chang\'e9e. Il est possible d'utiliser une fonction RAND[110] pour faire du load balancing sur plusieurs serveurs. Ex: streamRAND[1-10].example.fr va load balancer sur stream1,stream2,...,stream10. Il est \'e9galement possible d'utiliser une fonction [HOSTNAME] pour r\'e9cup\'e9rer le nom du serveur.\
\
# Folders on the file system Prod : /audiovideocours/cours/ /audiovideocours/ftp/ /audiovideocours/ftp/live/\
coursesFolder = /audiovideocours/cours/\
# Dossier contenant les cours de l'application.\
ftpFolder = /audiovideocours/ftp/\
# Dossier contenant les cours zipp\'e9s envoy\'e9s par le client.\
liveFolder = /audiovideocours/ftp/live/\
# Dossier servant \'e0 recevoir la capture d'\'e9cran envoy\'e9 par le client pendant le Live.\
\
# Default media filenames in the archive sent by the client\
defaultMp3File = enregistrement-micro.mp3\
defaultFlashFile = enregistrement-video.flv\
defaultMp4File = enregistrement-video.mp4\
defaultAudioMacFile1 = enregistrement-micro.flv\
defaultAudioMacFile2 = enregistrement-micro.aac\
# Ces param\'e8tres ne doivent pas \'eatre chang\'e9s pour le bon fonctionnement avec le client actuel.\
\
# Copyright comment\
comment = Owned by the author\
# Commentaire pour les tags des m\'e9dias.\
\
# IP address of the Flash Server for the video and audio live\
flashServerIp = vod-flash-avc.univ-lyon2.fr\
# Adresse du serveur flash pour la diffusion en live. Doit \'eatre chang\'e9e.\
\
# The settings of the RSS files, of the permalien (interface flash) and of emails\
rssTitle = AudioVideoCast\
rssName = AudioVideoCast\
rssDescription = Universit? Lyon 2\
rssImageUrl = http://avcast-test.univ-lyon2.fr/univ-r_av/files/img/univr-av-logo-rss.png\
rssCategory = Enseignement\
language = fr\
# Param\'e8tres pour les flux RSS. Peut \'eatre chang\'e9.\
recordedInterfaceUrl = http://avcast-test.univ-lyon2.fr/univ-r_av/avc/courseaccess\
# Lien utilis\'e9 pour les acc\'e8s directs aux enregistrements. Doit \'eatre chang\'e9.\
\
# The setting of the RSS files for iTunes\
itunesAuthor = Universit? Lyon 2\
itunesSubtitle = Enregistrement culturel\
itunesSummary = Retrouvez les supports synchronis?s sur avcast-test.univ-lyon2.fr\
itunesImage = http://avcast-test.univ-lyon2.fr/releases/Illustration_itunes_AVC.jpg\
itunesCategory = Enseignement\
itunesKeywords = science,culture,soci?t?,technologies,?ducation\
# Param\'e8tres pour les flux RSS sous iTunes. Peut \'eatre chang\'e9.\
\
# University parameters\
univName = Universite Lyon 2\
univAcronym = UL2\
univLink = http://www.univ-lyon2.fr/\
# Informations concernant l'universit\'e9 sur la page d'acceuil\
\
# Publication free\
pubFree = true\
#Publication test\
pubTest = true\
# Autoriser ou non la publication libre de contenu\
\
# The numbers of courses to display at the same time\
lastCourseNumber = 10\
selectionCourseNumber = 10\
collectionCourseNumber = 10\
recordedCourseNumber = 10\
# Permet de d\'e9finir le nombre de cours \'e0 afficher dans la page d'accueil et dans la page des enregistrements.\
\
# The default style\
defaultStyle = orange-theme\
# Th\'e8me du site par d\'e9faut.\
\
# The keyword to identify the tests to delete (genre is equal to this keyword)\
testKeyWord1 = Suppression\
# The keyword to identify the tests to hide (title begins with this keyword)\
testKeyWord2 = Testul2\
# testKeyWord3 = Essai\
# Mots cl\'e9 pour le code d'acc\'e8s d'un enregistrement permettant de le masquer.\
\
# The client port for the Univ-R integration\
#clientSocketPort = 3737\
\
#Admin email for notification (ex: user@domain.fr)\
adminEmail1=admin1@fai.fr\
adminEmail2=admin2@fai.fr\
adminEmail3=admin3@fai.fr\
# Adresse email des administrateurs. Doit \'eatre chang\'e9.\
\
#CAS Logout\
casLogoutUrl=https://casl2.univ-lyon2.fr/cas/logout\
# Adresse de d\'e9connexion du serveur cas. Doit \'eatre chang\'e9.\
\
#Additional document formats\
addDocFormats=pdf html swf ppt pptx odp docx doc odt xls xlsx ods rtf txt jpg jpeg png gif bmp zip bz bz2 ark rar 7z ac3 avi divx flv m3u m4a mov movie mp2 mp3 mp4 mpg mpeg ogg ra rm rv wav wma wmv aac\
# Formats de fichiers autoris\'e9s pour l'upload de documents additionnels.\
\
#Upload media formats\
uploadFormats=mp3 ogg wav wma avi divx mp4 mpg mpeg mov wmv mkv flv ogv webm m4v\
# Formats de fichiers autoris\'e9s pour l'upload de fichiers audio et video.\
\
#Link for support (help page)\
supportLink=http://dsi.univ-lyon2.fr\
helpLink=https://sites.google.com/site/wikiaudiovideocast/\
clientLink=https://sites.google.com/site/wikiaudiovideocast/client-logiciel-fr\
tracLink=http://sourcesup.cru.fr/projects/audiovideocours\
docLink=http://dsi.univ-lyon2.fr/acces-et-utilisation-des-outils-486843.kjsp\
# Lien d'aide pour l'application (page help). Peut \'eatre chang\'e9.\
\
#LDAP search properties\
ldapBaseDn=ou=people,dc=univ-lyon2,dc=fr\
ldapSearchFilter=uid\
ldapMail=mail\
ldapFirstname=givenName\
ldapLastname=sn\
ldapProfile=eduPersonPrimaryAffiliation\
ldapAffectation=supannetablissement\
ldapEtpPrimaryCode=udsPrimaryEtpCode\
ldapPrimaryInstitute=udsMainDepartmentCode\
ldapSecondaryInstitute=supannEntiteAffectationPrincipale\
# Propri\'e9t\'e9s de recherche du ldap. \'c0 modifier en fonction du ldap.\
\
# To separate medias encodage\
sepEnc=false\
# Si false, l'application web encode les m\'e9dias (par d\'e9faut). Si true, l'encodage des medias doit se faire s\'e9par\'e9ment (via t\'e2che cron qui appelle les scripts).\
\
# default record interface (flash or html5)\
defaultRecordInterface=html5\
# html5 ou flash pour l\'92interface de visualisation par d\'e9faut\
\
# Log user action stats\
logstats=true\
# logger les actions des utilisateurs pour les statistiques\
\
# Google analytics\
googleAnalyticsAccount=\
\
# Show Contact Us\
contactUs=true\
\cell \lastrow\row
\pard\pardeftab720\sa280

\f0\b\fs28 \cf0 c. D\'e9tail du filtre CAS du fichier "web.xml"\
\pard\pardeftab720\sa240

\b0\fs24 \cf0 Chemin d'acc\'e8s au fichier :\'a0
\f2 /usr/share/tomcat6/webapps/univ-r_av/WEB-INF/web.xml
\f0 \

\itap1\trowd \taflags0 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalc \clshdrawnil \clwWidth17000\clftsWidth3 \clmart10 \clmarl10 \clmarb10 \clmarr10 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt20 \clpadl20 \clpadb20 \clpadr20 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720

\f2 \cf0     <filter> \
        <filter-name>CAS filter</filter-name> \
        <filter-class>edu.yale.its.tp.cas.client.filter.CASFilter</filter-class> \
        <init-param> \
            <param-name>edu.yale.its.tp.cas.client.filter.loginUrl</param-name> \
            <param-value>https://cas.example.fr:443/cas/login</param-value>\
			Url de login du serveur CAS. \'c0 changer.\
        </init-param> \
        <init-param> \
            <param-name>edu.yale.its.tp.cas.client.filter.validateUrl</param-name> \
            <param-value>https://cas.example.fr:443/cas/serviceValidate</param-value>\
			Url de validation du serveur CAS. \'c0 changer.\'a0\
        </init-param> \
        <init-param>                     \
            <param-name>edu.yale.its.tp.cas.client.filter.serverName</param-name>                     \
            <param-value>localhost</param-value>\
			Url de retour apr\'e8s connexion au serveur CAS. Il s'agit de l'adresse de votre site. \'c0 changer.\
        </init-param>\
    </filter>\
\cell \lastrow\row
\pard\pardeftab720\sa240

\f0 \cf0 \
}